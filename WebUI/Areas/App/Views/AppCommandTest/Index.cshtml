
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="~/Resources/JavaScripts/jquery.signalR-2.2.2.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <style>
        .block
        {
                display: block;
                font-family: monospace;
                white-space: pre;
                margin: 1em 0px 1em;
                background-color: #e2e2e2;
                padding: 1em;
                font-size: 11px;
        }

    </style>
</head>
<body>
    <div>
        <h1>AspNetDeploy</h1>
      
        
        <div>
                    
            <button class="snippet" text='{
    name: "App/SourceControls/List"
}'>App/SourceControls/List</button>

            <button class="snippet" text='{
    name: "App/SourceControlVersions/List",
    data: 
    {
       sourceControlId: 5,
       normalOnly: true
    }
}'>App/SourceControlVersions/List</button>

            <button class="snippet" text='{
    name: "App/SourceControls/Add/Svn",
    data: 
    {
        name: "Source Control 1",
        url: "https://svn.office:8443/svn/office-svn/Projects/DocumentovedMarketingSite",
        login: "aspNetDeploy",
        password: "123"
    }
}'>App/SourceControls/Add/Svn</button>

            <button class="snippet" text='{
    name: "App/SourceControls/Update/Svn",
    data: 
    {
        id: 1,
        name: "Source Control 1",
        url: "https://svn.office:8443/svn/office-svn/Projects/DocumentovedMarketingSite",
        login: "aspNetDeploy",
        password: "123"
    }
}'>App/SourceControls/Update/Svn</button>

            <button class="snippet" text='{
    name: "App/SourceControls/Delete",
    data: 
    {
        id: 1
    }
}'>App/SourceControls/Delete</button>

        </div>
        <br/>
        <textarea id="idCommand" style="width: 700px; height: 200px;">
{
    name: "App/SourceControls/List"
}
        </textarea>

        

        <div>
            <input id="idExecute" type="button" value="Send "/>&nbsp;&nbsp;&nbsp;
            <input id="idClean" type="button" value="Cleanup "/>
        </div>
        <div id="idState">waiting hub connection</div>
        <div id="idOutput"></div>
        <script>

        $(function () {
            var appHub = $.connection.appHub;

            appHub.client.receive = function (message)
            {
                $('#idOutput').prepend($('<div class="block" />').text(JSON.stringify(message, null, 2)).hide().fadeIn());
            };

            $.connection.hub.start().done(function ()
            {
                $('#idState').text("connected");

                $('#idExecute').click(function() {
                    appHub.server.send(eval('x='+$('#idCommand').val()));
                });

                $('#idClean').click(function() {
                    $('#idOutput').html('');
                });
            });

            $('.snippet').click(function()
            {
                $('#idCommand').val($(this).attr('text'));
            })

        });

        </script>
    </div>
</body>
</html>
